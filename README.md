# ConsolePlus

**ConsolePlus** 是一款专为 Paper/Bukkit 服务器设计的控制台增强插件。它允许管理员直接从游戏控制台或物理控制台安全、异步地执行系统级 Shell 命令，并提供了完善的进程管理和环境配置功能。
- 基本上代码都是GEMINI写的，我也只是负责功能设计和测试以及改BUG，所以可能很屎山，我是萌新，不喜勿喷，最开始这个项目也是自用的。

## 核心特性

- **异步命令执行**：所有命令在独立线程中运行，绝不卡顿游戏主线程。
- **全能进程管理**：支持查看运行中进程的 CPU 和内存占用，支持随时停止进程或发送交互式输入 (stdin)。
- **跨平台支持**：内置稳健的参数转义和 CSV 解析器，完美适配 Windows 和 Linux 系统。
- **ANSI 颜色转换**：自动将系统终端的颜色代码转换为 Minecraft 颜色，让命令输出清晰美观。
- **多环境支持**：允许预设多套环境变量或前置执行脚本。
- **持久化日志**：每个进程的输出都会完整记录到插件目录的 `logs` 文件夹中。
- **完善的国际化 (I18n)**：目前支持 **简体中文 (zh_CN)** 和 **English (en_US)**。

## 构建说明 (离线/内网友好)

为了满足特定用户（如内网环境、涉密项目或网络受限环境）的开发需求，本项目采取了特殊的构建策略：

### 关于 `embedded-repo` 的特别说明
本项目仓库中包含了一个名为 `embedded-repo` 的目录。这是一个**内嵌的 Maven 本地仓库**，包含了编译本项目所需的所有依赖（包括 Paper API 及其传递依赖）和 Maven 插件。

*   **初衷**：确保在**完全断网**的机器上，只要有 Java 环境，即可实现“开箱即编译”。
*   **谅解**：包含此目录会导致代码仓库体积增大，且不符合常规的 Git 最佳实践。但考虑到离线生产环境的便利性，我选择了这种“重量级”的便携性方案，望各位开发者谅解。
*   **版权声明**：内嵌仓库中的所有 `.jar` 文件均为各开源项目的发行版本（如 Apache 2.0, MIT, LGPL 等），版权归原作者所有。

### 如何编译

#### 1. 离线构建 (推荐)
如果你处于断网环境，请运行以下命令：
```bash
./mvnw clean package -o -Dmaven.repo.local=./embedded-repo -DskipTests
```
*   `-o`：强制离线模式。
*   `-Dmaven.repo.local=./embedded-repo`：指定使用项目内置仓库。

#### 2. 标准构建 (联网)
如果你的网络环境良好，也可以直接使用标准 Maven 命令：
```bash
mvn clean package
```

## 安装与使用

1.  将 `target/ConsolePlus-1.7.jar` 放入服务器的 `plugins` 文件夹。
2.  启动服务器，插件将自动生成 `config.yml` 和 `languages/` 目录。
3.  在控制台输入 `/shell help` 查看详细用法。

---
*注：由于涉及到系统权限，建议仅从服务器物理控制台执行命令，或确保只有受信任的管理员拥有 `consoleplus.admin` 权限。*
